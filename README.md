# Проект: Сервис коротких ссылок

## 1. Введение

Цель проекта - разработать высокопроизводительный сервис сокращения URL-адресов, реализованный на языке Go с использованием веб-фреймворка Gin. Сервис будет принимать REST-запросы с исходными ссылками, хранить их в базе данных PostgreSQL и предоставлять пользователю укороченные URL. При переходе по короткой ссылке сервис автоматически перенаправляет пользователя на исходный URL.

## 2. Требования и ограничения

Функциональные требования:

1. Создание короткой ссылки по REST-запросу.
2. Редирект по короткой ссылке на оригинальный URL.
3. Высокая производительность: >1000 запросов в секунду.
4. Гарантия уникальности коротких идентификаторов.

Нефункциональные требования:

1. Масштабируемость: горизонтальное масштабирование сервисов.
2. Надежность и отказоустойчивость: устойчивость к сбоям отдельных компонентов.
3. Безопасность: Защита конфиденциальности.
4. Наблюдаемость: логирование, метрики, трассировка.
5. Быстрое развертывание: использование контейнеризации и Docker Compose.

## 3. Высокоуровневая архитектура

Система состоит из следующих основных блоков:

1. API Gateway
2. Сервис генерации ссылок (Link Generator Service)
3. Сервис перенаправления (Redirect Service)
4. Сервис статистики (Analytics Service)
5. База данных для хранения ссылок
6. gRPC для коммуникации
7. Система логирования и мониторинга

## 4. Детализация компонентов

1. API Gateway
Задачи:
- Прием REST-запросов /{key}.
- Балансировка нагрузки между экземплярами микросервисов.

2. Link Generator Service
Задачи: генерация уникального короткого ключа, сохранение ссылки в PostgreSQL.
Реализация:
- Язык: Go, фреймворк Gin.
- gRPC-интерфейс для записи в базу при масштабировании.
- Асинхронная публикация события создания ссылки в Kafka для аналитики.

3. Redirect Service
Задачи: поиск оригинального URL по ключу и перенаправление пользователя.
Реализация:
- Язык: Go, Gin.
- Синхронный gRPC-запрос к PostgreSQL для поиска URL.
- HTTP-редирект на найденный адрес.

4. Сервис статистики (Analytics Service)
Задачи: Сбор и агрегация событий создания/переходов по ссылкам.
Хранение и аналитика в ClickHouse.

5. База данных (PostgreSQL)

